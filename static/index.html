<!doctype html>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>

ApiHost="http://kno.ccl.io:6001";

function xtnsLeftToday() {
    $.ajax({
	url: ApiHost+"/xtnsLeftToday",
	dataType: "json",
    }).done(function(a,b,c,d) {
	//console.log('xS',a,b,c,d);
	console.log(a);
	console.log(a.results);
	console.log(a.results.consumedDailyTransactions);
	console.log(a.results.dailyTransactionLimit);

	console.log(a.results.consumedDailyTransactions + "/" +
	    a.results.dailyTransactionLimit);

	var display = (a.results.consumedDailyTransactions + "/" +
		       a.results.dailyTransactionLimit);

	$("#xtns").html( display );

    }).fail(function(a,b,c,d) {
	console.log('xF',a,b,c,d);
    }).always(function(a,b,c,d) {
	//console.log('xA',a,b,c,d);
    });
}
function knoAbout(what) {
    console.log("KNO ABOUT:", what);
    $.ajax({
	url: ApiHost+"/top?term=" + what,
    }).done(function(a,b,c,d) {
	console.log('S',a,b,c,d);
    }).fail(function(a,b,c,d) {
	console.log('F',a,b,c,d);
    }).always(function(a,b,c,d) {
	//console.log('A',a,b,c,d);
    });
}
function kno(elt) {
    var what = elt.value;
    elt.value = "";
    knoAbout(what);
    $('#transactions').html(-1);
}
function main() {
    xtnsLeftToday();
}
</script>
<head>
</head>
<body onload="main()">
<hr>
I want to kno about <input onchange="kno(this)">
<p>
<i>(BTW, only <span id="xtns">?</span> transactions left today)</i>
<br>
<button onclick="xtnsLeftToday()">REFRESH</button>
</body>
